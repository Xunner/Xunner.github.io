(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2693:function(e,t,n){Promise.resolve().then(n.bind(n,8431))},3934:function(e,t,n){"use strict";n.d(t,{a9:function(){return a},fs:function(){return o},xP:function(){return r}});let a={TT_PIXEL_ID:"CKNOFJ3C77U740699A5G",GTM_ID:"GTM-K9V3TGJ3"},o=(e,t)=>{let n=document.createElement("script");n.src=e,n.onload=n.onreadystatechange=function(){(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)&&(t&&t(),this.onload=this.onreadystatechange=null,this.parentNode&&this.parentNode.removeChild(this))},document.getElementsByTagName("head")[0].appendChild(n)},r=e=>new Promise((t,n)=>{e.execute(e=>{e.code&&n(e),t(e)})})},8431:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var a=n(7437),o=n(6691),r=n.n(o),i=n(345),c=n.n(i),s=n(3934),l=n(2265);function d(e){let{href:t,title:n,description:o,onClick:r}=e;return(0,a.jsxs)("a",{href:t,className:c().card,target:"_blank",rel:"noopener noreferrer",onClick:r,children:[(0,a.jsxs)("h2",{children:[n,(0,a.jsx)("span",{children:"->"})]}),(0,a.jsx)("p",{children:o})]})}let p="(not selected)",g="proto-web-container",u=["https://www.googleapis.com/auth/tagmanager.edit.containers","https://www.googleapis.com/auth/tagmanager.edit.containerversions","https://www.googleapis.com/auth/tagmanager.publish"];function h(e){let{pixelId:t}=e,[n,o]=(0,l.useState)(0),[r,i]=(0,l.useState)([]),[h,m]=(0,l.useState)([]),[w,_]=(0,l.useState)([]),[x,v]=(0,l.useState)([]),[j,f]=(0,l.useState)(!1),[N,b]=(0,l.useState)(!1),[C,k]=(0,l.useState)({label:p,value:p}),[T,y]=(0,l.useState)({label:p,value:p}),[L,P]=(0,l.useState)({label:p,value:p});(0,l.useEffect)(()=>{window.gapiLoad||(window.gapiLoad=S,(0,s.fs)("https://apis.google.com/js/api.js?onload=gapiLoad",window.gapiLoad)),window.gisLoad||(window.gisLoad=O,(0,s.fs)("https://accounts.google.com/gsi/client",window.gisLoad))},[]),(0,l.useEffect)(()=>{j&&N&&n>0&&(window.gisClient.callback=e=>{if(void 0!==e.error)throw e;D()},G())},[j,N,n]);let S=()=>{window.gapi&&window.gapi.load("client",()=>{window.gapi.client.init({}).then(()=>{f(!0)})})},O=()=>{window.google&&(window.gisClient=window.google.accounts.oauth2.initTokenClient({client_id:"289624798328-aqa97i679hubilrdvjubuundcqvot92g.apps.googleusercontent.com",scope:u.join(" "),callback:""}),b(!0))},G=()=>{window.gisClient&&window.gisClient.requestAccessToken({prompt:""})},E=()=>new Promise((e,t)=>{window.gapi.client.load("tagmanager","v2",e)}),A=async()=>new Promise((e,t)=>{I().then(M).then(U).then(q)}),I=()=>{let e=window.gapi.client.tagmanager.accounts.list();return(0,s.xP)(e).then(e=>{let t=e.account||[];if(!t.length){console.error("NO_GTM_ACCOUNT");return}console.info("accountList=",t),i(t.map(e=>({label:e.name,value:e.path})));let n=t[0]?t[0].path:"";if(!n){console.error("NO_ACCOUNT_PATH");return}return n}).catch(e=>{console.error(e)})},M=e=>{let t=window.gapi.client.tagmanager.accounts.containers.list({parent:e});return(0,s.xP)(t).then(e=>{let t=e.container||[];console.info("containerList=",t),m(t.map(e=>({label:e.name,value:e.path})));let n=t[0]?t[0].path:"";if(!n){console.error("NO_CONTAINER_PATH");return}return n}).catch(e=>{console.error(e)})},U=e=>{let t=window.gapi.client.tagmanager.accounts.containers.workspaces.list({parent:e});return(0,s.xP)(t).then(e=>{let t=e.workspace||[];console.info("workspaceList=",t),_(t.map(e=>({label:e.name,value:e.path})));let n=t[0]?t[0].path:"";if(!n){console.error("NO_WORKSPACE_PATH");return}return n}).catch(e=>{console.error(e)})},q=e=>{let t=window.gapi.client.tagmanager.accounts.containers.workspaces.tags.list({parent:e});return(0,s.xP)(t).then(e=>{let t=e.tag||[];return console.info("tagList=",t),v(t.map(e=>({label:e.name,value:e.path}))),t}).catch(e=>{console.error(e)})},D=()=>{E().then(A).catch(e=>{console.error(e)})},H=e=>{k(e),M(e.value).then(U).then(q)},K=e=>{y(e),U(e.value).then(q)},R=e=>{P(e),q(e.value)};return(0,a.jsxs)("div",{className:c().gtm_connection,children:[(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:c().center_text,children:["Select account: ",(0,a.jsx)("code",{className:c().code,children:C.label}),(0,a.jsx)("br",{}),"Select container: ",(0,a.jsx)("code",{className:c().code,children:T.label}),(0,a.jsx)("br",{}),"Select workspace: ",(0,a.jsx)("code",{className:c().code,children:L.label}),(0,a.jsx)("br",{})]})}),(0,a.jsxs)("div",{className:c().grid,children:[(0,a.jsx)(d,{title:"Login Google",description:"Login Google account to manage Google Tag Manager.",onClick:()=>{o(e=>e+1)}}),(0,a.jsx)(d,{title:"Create Container",description:'Create a web container "'.concat(g,'" in selected GTM account.'),onClick:()=>{if(C.value==p)return;let e=window.gapi.client.tagmanager.accounts.containers.create({parent:C.value},{name:g,usageContext:["web"],description:"Proto Web container"});return(0,s.xP)(e).then(e=>{console.info("create container response:",e),M(C.value)}).catch(e=>{console.error(e)})}}),(0,a.jsx)(d,{title:"Create Tags",description:"Create all the tags in selected GTM account.",onClick:()=>{if(T.value==p)return;let e=window.gapi.client.tagmanager.accounts.containers.workspaces.tags.create({parent:L.value},{name:"proto-web-container-tag",type:"cvt_171648748_6",parameter:[{key:"pixel_code",type:"template",value:t}]});return(0,s.xP)(e).then(e=>{console.info("create container response:",e),q(L.value)}).catch(e=>{console.error(e)})}})]}),(0,a.jsx)("p",{style:{display:r.length>0?"":"none"},children:"Accounts:"}),(0,a.jsx)("div",{className:c().grid,children:r.map(e=>(0,a.jsx)(d,{title:e.label,description:e.value,onClick:()=>H(e)},e.value))}),(0,a.jsx)("p",{style:{display:h.length>0?"":"none"},children:"Containers:"}),(0,a.jsx)("div",{className:c().grid,children:h.map(e=>(0,a.jsx)(d,{title:e.label,description:e.value,onClick:()=>K(e)},e.value))}),(0,a.jsx)("p",{style:{display:w.length>0?"":"none"},children:"Workspaces:"}),(0,a.jsx)("div",{className:c().grid,children:w.map(e=>(0,a.jsx)(d,{title:e.label,description:e.value,onClick:()=>R(e)},e.value))}),(0,a.jsx)("p",{style:{display:x.length>0?"":"none"},children:"Tags:"}),(0,a.jsx)("div",{className:c().grid,children:x.map(e=>(0,a.jsx)(d,{title:e.label,description:e.value},e.value))})]})}function m(){let[e,t]=(0,l.useState)(s.a9.TT_PIXEL_ID);return(0,a.jsxs)("main",{className:c().main,children:[(0,a.jsxs)("div",{className:c().description,children:[(0,a.jsxs)("p",{children:["Pixel \xa0",(0,a.jsx)("code",{className:c().code,children:e})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("a",{href:"https://vercel.com?utm_source=create-next-app&utm_medium=appdir-template&utm_campaign=create-next-app",target:"_blank",rel:"noopener noreferrer",children:["By"," ",(0,a.jsx)(r(),{src:"/vercel.svg",alt:"Vercel Logo",className:c().vercelLogo,width:100,height:24,priority:!0})]})})]}),(0,a.jsx)("div",{className:c().center,children:(0,a.jsx)(r(),{className:c().logo,src:"/next.svg",alt:"Next.js Logo",width:180,height:37,priority:!0})}),(0,a.jsx)(h,{pixelId:e})]})}},345:function(e){e.exports={main:"page_main__GlU4n",gtm_connection:"page_gtm_connection__pCqu7",center_text:"page_center_text__TiXxN",description:"page_description__86bsR",code:"page_code__9lUUd",grid:"page_grid__f5Kdy",card:"page_card__QV0Om",center:"page_center__5oHG7",logo:"page_logo__7fc9l",content:"page_content__kDoxQ",vercelLogo:"page_vercelLogo__rOY_u",rotate:"page_rotate__durgN"}}},function(e){e.O(0,[986,971,938,744],function(){return e(e.s=2693)}),_N_E=e.O()}]);