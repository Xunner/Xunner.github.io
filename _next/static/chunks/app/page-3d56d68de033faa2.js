(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2693:function(e,t,a){Promise.resolve().then(a.bind(a,1471))},1471:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var n=a(7437),o=a(6691),c=a.n(o),i=a(345),r=a.n(i),s=a(2265);let l=(e,t)=>{let a=document.createElement("script");a.src=e,a.onload=a.onreadystatechange=function(){(!this.readyState||"loaded"===this.readyState||"complete"===this.readyState)&&(t&&t(),this.onload=this.onreadystatechange=null,this.parentNode&&this.parentNode.removeChild(this))},document.getElementsByTagName("head")[0].appendChild(a)},d=e=>new Promise((t,a)=>{e.execute(e=>{e.code&&a(e),t(e)})});function g(e){let{href:t,title:a,description:o,onClick:c}=e;return(0,n.jsxs)("a",{href:t,className:r().card,target:"_blank",rel:"noopener noreferrer",onClick:c,children:[(0,n.jsxs)("h2",{children:[a,(0,n.jsx)("span",{children:"->"})]}),(0,n.jsx)("p",{children:o})]})}let p="(not selected)",u="proto-web-container",h=["https://www.googleapis.com/auth/tagmanager.edit.containers","https://www.googleapis.com/auth/tagmanager.edit.containerversions","https://www.googleapis.com/auth/tagmanager.publish"];function m(e){let{pixelId:t}=e,[a,o]=(0,s.useState)(0),[c,i]=(0,s.useState)([]),[m,w]=(0,s.useState)([]),[_,x]=(0,s.useState)([]),[v,j]=(0,s.useState)([]),[f,N]=(0,s.useState)(!1),[b,C]=(0,s.useState)(!1),[k,L]=(0,s.useState)({label:p,value:p}),[S,T]=(0,s.useState)({label:p,value:p}),[y,O]=(0,s.useState)({label:p,value:p});(0,s.useEffect)(()=>{window.gapiLoad||(window.gapiLoad=P,l("https://apis.google.com/js/api.js?onload=gapiLoad",window.gapiLoad)),window.gisLoad||(window.gisLoad=A,l("https://accounts.google.com/gsi/client",window.gisLoad))},[]),(0,s.useEffect)(()=>{f&&b&&a>0&&(window.gisClient.callback=e=>{if(void 0!==e.error)throw e;R()},E())},[f,b,a]);let P=()=>{window.gapi&&window.gapi.load("client",()=>{window.gapi.client.init({}).then(()=>{N(!0)})})},A=()=>{window.google&&(window.gisClient=window.google.accounts.oauth2.initTokenClient({client_id:"289624798328-aqa97i679hubilrdvjubuundcqvot92g.apps.googleusercontent.com",scope:h.join(" "),callback:""}),C(!0))},E=()=>{window.gisClient&&window.gisClient.requestAccessToken({prompt:""})},G=()=>new Promise((e,t)=>{window.gapi.client.load("tagmanager","v2",e)}),U=async()=>new Promise((e,t)=>{M().then(q).then(H).then(I)}),M=()=>d(window.gapi.client.tagmanager.accounts.list()).then(e=>{let t=e.account||[];if(!t.length){console.error("NO_GTM_ACCOUNT");return}console.info("accountList=",t),i(t.map(e=>({label:e.name,value:e.path})));let a=t[0]?t[0].path:"";if(!a){console.error("NO_ACCOUNT_PATH");return}return a}).catch(e=>{console.error(e)}),q=e=>d(window.gapi.client.tagmanager.accounts.containers.list({parent:e})).then(e=>{let t=e.container||[];console.info("containerList=",t),w(t.map(e=>({label:e.name,value:e.path})));let a=t[0]?t[0].path:"";if(!a){console.error("NO_CONTAINER_PATH");return}return a}).catch(e=>{console.error(e)}),H=e=>d(window.gapi.client.tagmanager.accounts.containers.workspaces.list({parent:e})).then(e=>{let t=e.workspace||[];console.info("workspaceList=",t),x(t.map(e=>({label:e.name,value:e.path})));let a=t[0]?t[0].path:"";if(!a){console.error("NO_WORKSPACE_PATH");return}return a}).catch(e=>{console.error(e)}),I=e=>d(window.gapi.client.tagmanager.accounts.containers.workspaces.tags.list({parent:e})).then(e=>{let t=e.tag||[];return console.info("tagList=",t),j(t.map(e=>({label:e.name,value:e.path}))),t}).catch(e=>{console.error(e)}),R=()=>{G().then(U).catch(e=>{console.error(e)})};return(0,n.jsxs)("div",{className:r().gtm_connection,children:[(0,n.jsx)("div",{children:(0,n.jsxs)("p",{className:r().center_text,children:["Select account: ",(0,n.jsx)("code",{className:r().code,children:k.label}),(0,n.jsx)("br",{}),"Select container: ",(0,n.jsx)("code",{className:r().code,children:S.label}),(0,n.jsx)("br",{}),"Select workspace: ",(0,n.jsx)("code",{className:r().code,children:y.label}),(0,n.jsx)("br",{})]})}),(0,n.jsxs)("div",{className:r().grid,children:[(0,n.jsx)(g,{title:"Login Google",description:"Login Google account to manage Google Tag Manager.",onClick:()=>{o(e=>e+1)}}),(0,n.jsx)(g,{title:"Create Container",description:'Create a web container "'.concat(u,'" in selected GTM account.'),onClick:()=>{if(k.value!=p)return d(window.gapi.client.tagmanager.accounts.containers.create({parent:S.value},{name:u,description:"Proto Web container"})).then(e=>{console.info("create container response:",e),q(S.value)}).catch(e=>{console.error(e)})}}),(0,n.jsx)(g,{title:"Create Tags",description:"Create all the tags in selected GTM account.",onClick:()=>{if(S.value!=p)return d(window.gapi.client.tagmanager.accounts.containers.workspaces.tags.create({parent:y.value},{name:"proto-web-container-tag",type:"ua",parameter:[{key:"trackingId",type:"template",value:"UA-1234-5"}]})).then(e=>{console.info("create container response:",e),I(y.value)}).catch(e=>{console.error(e)})}})]}),(0,n.jsx)("div",{className:r().grid,children:c.map(e=>(0,n.jsx)(g,{title:e.label,description:e.value,onClick:()=>L(e)},e.value))}),(0,n.jsx)("div",{className:r().grid,children:m.map(e=>(0,n.jsx)(g,{title:e.label,description:e.value,onClick:()=>T(e)},e.value))}),(0,n.jsx)("div",{className:r().grid,children:_.map(e=>(0,n.jsx)(g,{title:e.label,description:e.value,onClick:()=>O(e)},e.value))}),(0,n.jsx)("div",{className:r().grid,children:v.map(e=>(0,n.jsx)(g,{title:e.label,description:e.value},e.value))})]})}function w(){let[e,t]=(0,s.useState)("CL9M2I3C77U1T02D97SG");return(0,n.jsxs)("main",{className:r().main,children:[(0,n.jsxs)("div",{className:r().description,children:[(0,n.jsxs)("p",{children:["Pixel \xa0",(0,n.jsx)("code",{className:r().code,children:e})]}),(0,n.jsx)("div",{children:(0,n.jsxs)("a",{href:"https://vercel.com?utm_source=create-next-app&utm_medium=appdir-template&utm_campaign=create-next-app",target:"_blank",rel:"noopener noreferrer",children:["By"," ",(0,n.jsx)(c(),{src:"/vercel.svg",alt:"Vercel Logo",className:r().vercelLogo,width:100,height:24,priority:!0})]})})]}),(0,n.jsx)("div",{className:r().center,children:(0,n.jsx)(c(),{className:r().logo,src:"/next.svg",alt:"Next.js Logo",width:180,height:37,priority:!0})}),(0,n.jsx)(m,{pixelId:e})]})}},345:function(e){e.exports={main:"page_main__GlU4n",gtm_connection:"page_gtm_connection__pCqu7",center_text:"page_center_text__TiXxN",description:"page_description__86bsR",code:"page_code__9lUUd",grid:"page_grid__f5Kdy",card:"page_card__QV0Om",center:"page_center__5oHG7",logo:"page_logo__7fc9l",content:"page_content__kDoxQ",vercelLogo:"page_vercelLogo__rOY_u",rotate:"page_rotate__durgN"}}},function(e){e.O(0,[986,971,938,744],function(){return e(e.s=2693)}),_N_E=e.O()}]);